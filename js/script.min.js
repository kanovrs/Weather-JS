"use strict";var temp=document.getElementById("temp"),date=document.getElementById("date-time"),currentLocation=document.getElementById("location"),cloudy=document.getElementById("cloudy"),rain=document.getElementById("rain"),weatherIcon=document.getElementById("icon"),uvIndex=document.getElementById("uv-index"),windSpeed=document.getElementById("wind"),sunRise=document.getElementById("sunrise"),sunSet=document.getElementById("sunset"),humidity=document.getElementById("humidity"),visibility=document.getElementById("visibility"),airQality=document.getElementById("air-qality"),uvText=document.getElementById("uv-text"),humidityText=document.getElementById("humidity-txt"),visibilityText=document.getElementById("visibility-text"),airQalityText=document.getElementById("air-qality-txt"),mainIcon=document.getElementById("icon"),dayCards=document.getElementById("day-cards"),celsiusBtn=document.getElementById("units-c"),fahrenheitBtn=document.getElementById("units-f"),hourlyBtn=document.getElementById("hourly"),weekBtn=document.getElementById("week"),typeUnits=document.querySelectorAll(".temperature__unit"),body=document.body,inputCity=document.getElementById("curent"),searchBtn=document.getElementById("searchBtn"),currentCity="",currentUnit="c",hourlyourWeek="hourly";function getDeteTime(e){var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][(new Date).getDay()];return"".concat(t,", Update time: ").concat(e)}function getPublickIp(){fetch("https://ipinfo.io/json?token=3acb5bbde53cd0",{method:"GET"}).then(function(e){return e.json()}).then(function(e){getWeatherData(currentCity=e.city,currentUnit,hourlyourWeek)}).catch(function(e){console.error("Error while retrieving location data:",e)})}function getWeatherData(e,n,i){fetch("https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/".concat(e,"?unitGroup=metric&key=").concat("KBADLE56K3UTXMBQVEHXL8A43"),{method:"GET"}).then(function(e){return e.json()}).then(function(e){var t=e.currentConditions;"c"===n?(temp.innerText=t.temp.toFixed(0),0<t.temp&&(temp.innerText="+"+t.temp.toFixed(0))):temp.innerText=celsiusToFahrenheit(t.temp.toFixed(0)),currentLocation.innerText=e.resolvedAddress,cloudy.innerText=t.conditions,rain.innerText="Rain :".concat(t.precip," %"),uvIndex.innerText=t.uvindex,windSpeed.innerText=t.windspeed,humidity.innerText="".concat(t.humidity," %"),visibility.innerText=t.visibility,airQality.innerText=t.winddir,date.innerText=getDeteTime(t.datetime),measurveUvIndex(t.uvindex),updateHumidityStatus(t.humidity),updateVisibilityStatus(t.visibility),updateAirQality(t.winddir),sunRise.innerText=convertTimeTo24Format(t.sunrise),sunSet.innerText=convertTimeTo24Format(t.sunset),mainIcon.src=getIcon(t.icon),changeBackground(t.icon),"hourly"===i?updateForecast(e.days[0].hours,n,"day"):updateForecast(e.days,n,"week")}).catch(function(e){console.error("Error while retrieving weather data:",e)})}function celsiusToFahrenheit(e){return(9*e/5+32).toFixed(0)}function measurveUvIndex(e){uvText.innerText=e<2?"low":e<5?"Moderate":e<7?"Hight":e<10?"Very hight":"Exreme"}function updateHumidityStatus(e){humidityText.innerText=e<30?"low":e<60?"Moderate":"Hight"}function updateVisibilityStatus(e){visibilityText.innerText=e?e<.3?"Dense fog":e<.6?"Moderate fog":e<.35?"Light fog":e<1.13?"Very light fog":e<2.16?"Light mist":e<5.4?"Very light mist":e<10.8?"Clear air":"Very clear air":"Not Data"}function updateAirQality(e){airQalityText.innerText=e<50?"Good":e<100?"Moderate":e<150?"Unhealthy for sensetive group":e<200?"Unhealthy":e<250?"Very Unhealthy":"Hazardous"}function convertTimeTo24Format(e){var t;return e?(t=e.split(":")[0],(t=(t=(t%=24)||24)<10?"0"+t:t)+":"+(t=(t=e.split(":")[1])<10?"0"+t:t)):"00:00"}function getIcon(e){return"partly-cloudy-day"===e?"images/pcloudy-day.png":"partly-cloudy-night"===e?"images/pcloudy-night.png":"snow"===e?"images/snow.png":"rain"===e?"images/rain.png":"clear-day"===e?"images/sun.png":"clear-night"===e?"images/clear-night.png":"cloudy"===e?"images/cloudy.png":"images/storm.png"}function getHour(e){var t=e.split(":")[0],e=e.split(":")[1];return"".concat(t," : ").concat(e)}function getDayName(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(e).getDay()]}function updateForecast(e,t,n){dayCards.innerHTML="";for(var i=0,a=0,a="day"===n?24:7,r=0;r<a;r++){var c=document.createElement("div"),o=(c.classList.add("card"),getHour(e[i].datetime)),d=("week"===n&&(o=getDayName(e[i].datetime)),e[i].temp.toFixed(0));"f"===t&&(d=celsiusToFahrenheit(e[i].temp.toFixed(0)));var u=getIcon(e[i].icon),s="f"===t?"°F":"°C";c.innerHTML='\n         <div class="cards__item">\n        <h1 class="cards__name">'.concat(o,'</h1>\n        <img src="').concat(u,'" class="cards__img" alt="img" />\n        <div class="cards__temp">\n            <span class="cards__temp-bold">').concat(d,'</span>\n            <span class="cards__unit">').concat(s,"</span>\n        </div>\n    </div>\n        "),dayCards.appendChild(c),i++}}function changeUnit(t){currentUnit!==t&&(currentUnit=t,typeUnits.forEach(function(e){e.innerText="°".concat(t.toUpperCase())}),("c"===t?(celsiusBtn.classList.add("active"),fahrenheitBtn):(fahrenheitBtn.classList.add("active"),celsiusBtn)).classList.remove("active"),getWeatherData(currentCity,currentUnit,hourlyourWeek))}function changeBackground(e){var t="",t="partly-cloudy-day"===e?"images/cloudy-day_bg.jpg":"partly-cloudy-night"===e?"images/cloudy-night_bg.jpg":"snow"===e?"images/snow.jpg":"rain"===e?"images/night-rain_bg.jpg":"clear-day"===e?"images/day_bg.jpg":"clear-night"===e?"images/night_bg.jpg":"images/cloudy-day_bg.jpg",e=new Image;e.onload=function(){body.style.backgroundImage="linear-gradient(\n      to top,\n      rgba(0, 0, 0, 0.3),\n      rgba(0, 0, 0, 0.3)\n    ),\n    url(".concat(t,")")},e.onerror=function(){console.error("Ошибка при загрузке изображения:",t)},e.src=t}function changeTime(e){hourlyourWeek!==e&&("hourly"===(hourlyourWeek=e)?(hourlyBtn.classList.add("active"),weekBtn.classList.remove("active")):(hourlyBtn.classList.remove("active"),weekBtn.classList.add("active")),getWeatherData(currentCity,currentUnit,hourlyourWeek))}function chanageCity(e){e.preventDefault();e=inputCity.value.trim();["киев","Київ","Киев","київ"].includes(e)?getWeatherData(currentCity="Kyiv",currentUnit,hourlyourWeek):currentCity!==e&&getWeatherData(currentCity=e,currentUnit,hourlyourWeek)}date.innerText=getDeteTime(),getPublickIp(),fahrenheitBtn.addEventListener("click",function(){changeUnit("f")}),celsiusBtn.addEventListener("click",function(){changeUnit("c")}),hourlyBtn.addEventListener("click",function(){changeTime("hourly")}),weekBtn.addEventListener("click",function(){changeTime("week")}),inputCity.addEventListener("keydown",function(e){"Enter"===e.key&&chanageCity(e)}),searchBtn.addEventListener("click",function(e){chanageCity(e)});